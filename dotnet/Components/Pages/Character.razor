@page "/characters/{characterId:int}"
@inject PlayerCharacterService CharService

<div class="container mt-4">
  <h2>@Char.Name — Level @Char.Level </h2>


  <!-- Stats -->
  <div class="d-flex" style="text-size: 10px;">
    @if(Char?.Stats != null){
      <StatBlock Stats="@Char.Stats" FlexFill="true" />
    }
  </div>

  @if(Char?.Gauges != null){
  <!-- Globes -->
  <div class="d-flex">
    @foreach (var gauge in Char.Gauges) {
      <Orb Name="@gauge.Name" Colour="@gauge.Colour" Value="@gauge.Value" Max="@gauge.Max"/>
    }
  </div>

  }

  @if(Char?.Hunger != null) {
    <div class = "card">
      <div class="card-header">
      Hunger:
      </div>
      
      <div class="card-body fs-7">
        <CharBar Repeat="@(Char.Hunger ?? 10)" Icon="🍖"/>
        <span>@Char.Hunger / 10</span> 
      </div>
    </div>
  }

   @if(Char?.Statuses != null){

  <!-- Statuses -->
  <div class="row mt-4">

    <div class="col">
      <div class="card">
        <ul class="list-group list-group-flush">
          @foreach (var status in Char.Statuses) {
          <li
            class="list-group-item d-flex justify-content-between align-items-center"
          >
            <span>@status.DisplayName</span>
            <span>
              @if (!string.IsNullOrEmpty(status.Symbol)) { @status.Symbol }
              @status.Value
            </span>
          </li>
          }
        </ul>
      </div>
    </div>
  </div>

  }
</div>

@code {
  PlayerCharacter Char;

  [Parameter]
  public int CharacterId { get; set; }

  protected override void OnInitialized() {
    Char = CharService.GetById(CharacterId);
  }
}
